define(["require","jquery","underscore","mustache","module/util","jquery.maskedinput"],function(e,r){function s(e){return console.log("success form"),console.log(e),e.errors.length&&n.each(function(s){for(i=0;i<e.errors.length;i++)s=e.errors[i].field,l=e.errors[i].name,r(this).data("field-name")!=s||r(this).hasClass(t)||(x='<div class="error-text js-field-error">'+l+"</div>",r(this).addClass(t).closest(".js-user-wrap").prepend(x))}),e.redirect.length&&(window.location.href=e.redirect),!1}function o(e,r,s){console.log("error form"),console.log(e),console.log(r),console.log(s)}r.mask.definitions.x="[0-9]",r(".js-field-phone").mask("+7(xxx)xxx-xx-xx",{placeholder:"+7(xxx)xxx-xx-xx"}),r(".js-field-mnogoru").mask("xxxx xxxx",{placeholder:"xxxx xxxx"});var l,x,i,n=r(".js-user-field"),t=(r(".js-global-error"),"textfield-err");n.focus(function(){n.hasClass(t)&&(r(this).removeClass(t),r(this).removeClass(t).closest(".js-user-wrap").find(".js-field-error").remove())}),r(".js-user-submit").click(function(e){e.preventDefault();var l=r(".js-user-form"),x=l.attr("action");return r.ajax({type:"POST",url:x,data:l.serialize(),error:o,success:s}),!1})});