define(["require","jquery","underscore","mustache","module/util","jquery.enterslide","jquery.photoswipe","module/product.card.tab","module/product.card.fullimg","module/product.card.kit"],function(t,e,r,a,i){var d=e("body"),n=[];e(".js-productSlider").each(function(t,r){var a=e(r).data("url");a&&n.push(a)}),n=r.uniq(n),r.each(n,function(t){e.get(t).done(function(t){r.each(t.result.widgets,function(t,a){if(!r.isObject(t)||!a)return void console.warn("slider",a,t);var i=e(a);if(t.count<=0&&i)return void i.remove();console.info("slider",t,i),i.trigger("render",t),d.trigger("render");var n=i.parents(".js-container");n.length&&(n.show(),e(n.data("tabSelector")).animate({width:"show"}))}),e(".js-productSliderList").each(function(){var t=e(this).parents(".js-productSlider").data("ga");e(this).enterslide({scrollGa:t})})})}),$creditPayment=e(".js-creditPayment"),console.info("creditPayment",$creditPayment);var c=$creditPayment.data("value");r.isObject(c)&&t(["module/direct-credit","direct-credit"],function(t){c.product.quantity=1,t.getPayment({partnerId:c.partnerId},d.data("user"),c.product,function(t){var r=e($creditPayment.data("templateSelector")),d=e($creditPayment.data("priceSelector")),n=Math.ceil(t.payment);d.html(a.render(r.html(),{shownPrice:i.formatCurrency(n)})),$creditPayment.show()})}),e(".js-productKit-reset").on("click",function(t){var r=e(t.target),a=r.data("value"),i=e(r.data("spinnerSelector"));i.each(function(t,r){var i=e(r),d=e(i.data("buttonSelector")).data("value"),n=i.data("value"),c=a.product[n.product.id];return c&&d&&d.product&&d.product[c.id]?(d.product[c.id].quantity=c.quantity,void i.val(c.quantity)):!0})}),e(".js-productReviewList-more").on("click",function(t){t.preventDefault();try{var a=e(this),i=e(a.data("containerSelector")),d=i.data("url"),n=i.data("value");d&&!0!==a.data("disabled")&&(e.get(d,n).done(function(t){r.isObject(t.result)&&n&&i.length&&(n.page=t.result.page,n.count=t.result.count,n.limit=t.result.limit,n.page*n.limit>n.count||!t.result.count?a.hide():a.show(),i.append(t.result.reviewBlock))}).always(function(){a.data("disabled",!1)}),a.data("disabled",!0))}catch(c){console.error(c)}})});