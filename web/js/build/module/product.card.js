define(["require","jquery","underscore","mustache","module/util","jquery.photoswipe","module/product.card.tab","module/product.card.fullimg","module/product.card.kit","jquery.slick"],function(t,e,r,i,s){var a=e("body"),n=[];e(".js-productSlider").each(function(t,r){var i=e(r).data("url");i&&n.push(i)}),n=r.uniq(n),r.each(n,function(t){e.get(t).done(function(t){r.each(t.result.widgets,function(t,i){if(!r.isObject(t)||!i)return void console.warn("slider",i,t);var s=e(i);if(t.count<=0&&s)return void s.remove();console.info("slider",t,s),s.trigger("render",t),a.trigger("render");var n=s.parents(".js-container");n.length&&(n.show(),e(n.data("tabSelector")).animate({width:"show"}))}),e(".js-productSliderList").each(function(){var t=e(this).parents(".js-productSlider").data("ga");e(this).slick({infinite:!1,slidesToShow:6,slidesToScroll:6,nextArrow:'<span class="sliderControls_btn sliderControls_btn__right js-ga-click"></span>',prevArrow:'<span class="sliderControls_btn sliderControls_btn__left js-ga-click"></span>',responsive:[{breakpoint:800,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:700,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:600,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:500,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:300,settings:{slidesToShow:2,slidesToScroll:2}}]}),e(this).find(".sliderControls_btn").data("gaClick",t)})})}),e(".js-detailSlider").slick({infinite:!1,dots:!0,nextArrow:'<span class="sliderControls_btn sliderControls_btn__right js-ga-click"></span>',prevArrow:'<span class="sliderControls_btn sliderControls_btn__left js-ga-click"></span>',customPaging:function(){return'<span class="slider_pag_i"></span>'},appendDots:".slider_pag"}),$creditPayment=e(".js-creditPayment"),console.info("creditPayment",$creditPayment);var o=$creditPayment.data("value");r.isObject(o)&&t(["module/direct-credit","direct-credit"],function(t){o.product.quantity=1,t.getPayment({partnerId:o.partnerId},a.data("user"),o.product,function(t){var r=e($creditPayment.data("templateSelector")),a=e($creditPayment.data("priceSelector")),n=Math.ceil(t.payment);a.html(i.render(r.html(),{shownPrice:s.formatCurrency(n)})),$creditPayment.show()})}),e(".js-productKit-reset").on("click",function(t){var r=e(t.target),i=r.data("value"),s=e(r.data("spinnerSelector"));s.each(function(t,r){var s=e(r),a=e(s.data("buttonSelector")).data("value"),n=s.data("value"),o=i.product[n.product.id];return o&&a&&a.product&&a.product[o.id]?(a.product[o.id].quantity=o.quantity,void s.val(o.quantity)):!0})}),e(".js-productReviewList-more").on("click",function(t){t.preventDefault();try{var i=e(this),s=e(i.data("containerSelector")),a=s.data("url"),n=s.data("value");a&&!0!==i.data("disabled")&&(e.get(a,n).done(function(t){r.isObject(t.result)&&n&&s.length&&(n.page=t.result.page,n.count=t.result.count,n.limit=t.result.limit,n.page*n.limit>n.count||!t.result.count?i.hide():i.show(),s.append(t.result.reviewBlock))}).always(function(){i.data("disabled",!1)}),i.data("disabled",!0))}catch(o){console.error(o)}})});