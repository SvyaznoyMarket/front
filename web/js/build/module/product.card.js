define(["require","jquery","underscore","mustache","module/util","module/config","jquery.photoswipe","module/product.card.tab","module/product.card.fullimg","module/product.card.kit","jquery.slick"],function(t,e,r,i,o,s){var n=e("body"),a=[];e(".js-productSlider").each(function(t,r){var i=e(r).data("url");i&&a.push(i)}),a=r.uniq(a),r.each(a,function(t){e.get(t).done(function(t){r.each(t.result.widgets,function(t,i){if(!r.isObject(t)||!i)return void console.warn("slider",i,t);var o=e(i);if(t.count<=0&&o)return void o.remove();console.info("slider",t,o),o.trigger("render",t),n.trigger("render");var s=o.parents(".js-container");s.length&&(s.show(),e(s.data("tabSelector")).animate({width:"show"}))}),e(".js-productSliderList").each(function(){var t=e(this).parents(".js-productSlider").data("ga");e(this).slick({infinite:!1,slidesToShow:6,slidesToScroll:6,nextArrow:'<span class="sliderControls_btn sliderControls_btn__right js-ga-click"></span>',prevArrow:'<span class="sliderControls_btn sliderControls_btn__left js-ga-click"></span>',responsive:[{breakpoint:800,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:700,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:600,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:500,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:340,settings:{slidesToShow:2,slidesToScroll:2}}]}),e(this).find(".sliderControls_btn").data("gaClick",t)})})}),e(".js-detailSlider").slick({infinite:!1,dots:!0,nextArrow:'<span class="sliderControls_btn sliderControls_btn__right js-ga-click"></span>',prevArrow:'<span class="sliderControls_btn sliderControls_btn__left js-ga-click"></span>',customPaging:function(){return'<span class="slider_pag_i"></span>'},appendDots:".slider_pag"});var l=e(".js-creditPayment");console.info("creditPayment",l);var d=l.data("value");r.isObject(d)&&t(["module/direct-credit","direct-credit"],function(t){d.product.quantity=1,t.getPayment(d.partnerId,d.sessionId,d.product,function(t){var r=e(l.data("templateSelector")),s=e(l.data("priceSelector")),n=Math.ceil(t.payment);s.html(i.render(r.html(),{shownPrice:o.formatCurrency(n)})),l.show()})}),e(".js-productKit-reset").on("click",function(t){var r=e(t.target),i=r.data("value"),o=e(r.data("spinnerSelector"));o.each(function(t,r){var o=e(r),s=e(o.data("buttonSelector")).data("value"),n=o.data("value"),a=i.product[n.product.id];return a&&s&&s.product&&s.product[a.id]?(s.product[a.id].quantity=a.quantity,void o.val(a.quantity)):!0})}),e(".js-productReviewList-more").on("click",function(t){t.preventDefault();try{var i=e(this),o=e(i.data("containerSelector")),s=o.data("url"),n=o.data("value");s&&!0!==i.data("disabled")&&(e.get(s,n).done(function(t){r.isObject(t.result)&&n&&o.length&&(n.page=t.result.page,n.count=t.result.count,n.limit=t.result.limit,n.page*n.limit>n.count||!t.result.count?i.hide():i.show(),o.append(t.result.reviewBlock))}).always(function(){i.data("disabled",!1)}),i.data("disabled",!0))}catch(a){console.error(a)}}),function(t,e,r){var i=parseInt(t.productId,10),o=r.cookie("product_viewed")?r.cookie("product_viewed").split(","):[],s=e.find(o,function(t){return t===i});s||(o.push(i),r.cookie("product_viewed",o.join(","),{expires:7}))}(s,r,e)});