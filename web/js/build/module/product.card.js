define(["require","jquery","underscore","mustache","module/util","module/config","jquery.photoswipe","module/product.view","module/product.card.kit","jquery.slick","module/product.card.tab"],function(t,e,i,r,o,a){var n=e("body"),s=[];e(".js-productSlider").each(function(t,i){var r=e(i).data("url");r&&s.push(r)}),s=i.uniq(s),i.each(s,function(t){e.get(t).done(function(t){i.each(t.result.widgets,function(t,r){if(!i.isObject(t)||!r)return void console.warn("slider",r,t);var o=e(r);if(t.count<=0&&o)return void o.remove();console.info("slider",t,o),o.trigger("render",t),n.trigger("render");var a=o.parents(".js-container");a.length&&(a.show(),e(a.data("tabSelector")).animate({width:"show"}))}),e(".js-productSliderList").each(function(){var t=e(this).parents(".js-productSlider").data("ga");e(this).slick({infinite:!1,slidesToShow:6,slidesToScroll:6,arrow:!1,responsive:[{breakpoint:800,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:700,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:600,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:500,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:340,settings:{slidesToShow:2,slidesToScroll:2}}]}),e(this).find(".sliderControls_btn").data("gaClick",t)})})}),e(".js-detailSlider").slick({infinite:!1,dots:!0,arrows:!1,nextArrow:'<span class="sliderControls_btn sliderControls_btn__right js-ga-click"></span>',prevArrow:'<span class="sliderControls_btn sliderControls_btn__left js-ga-click"></span>',customPaging:function(){return'<span class="slider_pag_i"></span>'},appendDots:".slider_pag"});var d=e(".js-creditPayment");console.info("creditPayment",d);var c=d.data("value");i.isObject(c)&&t(["module/direct-credit","direct-credit"],function(t){c.product.quantity=1,t.getPayment(c.partnerId,c.sessionId,c.product,function(t){var i=e(d.data("templateSelector")),a=e(d.data("priceSelector")),n=Math.ceil(t.payment);a.html(r.render(i.html(),{shownPrice:o.formatCurrency(n)})),d.show()})}),e(".js-productKit-reset").on("click",function(t){var i=e(t.target),r=i.data("value"),o=e(i.data("spinnerSelector"));o.each(function(t,i){var o=e(i),a=e(o.data("buttonSelector")).data("value"),n=o.data("value"),s=r.product[n.product.id];return s&&a&&a.product&&a.product[s.id]?(a.product[s.id].quantity=s.quantity,void o.val(s.quantity)):!0})}),e(".js-productReviewList-more").on("click",function(t){t.preventDefault();try{var r=e(this),o=e(r.data("containerSelector")),a=o.data("url"),n=o.data("value");a&&!0!==r.data("disabled")&&(e.get(a,n).done(function(t){i.isObject(t.result)&&n&&o.length&&(n.page=t.result.page,n.count=t.result.count,n.limit=t.result.limit,n.page*n.limit>n.count||!t.result.count?r.hide():r.show(),o.append(t.result.reviewBlock))}).always(function(){r.data("disabled",!1)}),r.data("disabled",!0))}catch(s){console.error(s)}}),function(t,e,i){var r=parseInt(t.productId,10),o=i.cookie("product_viewed")?i.cookie("product_viewed").split(","):[],a=e.find(o,function(t){return t===r});a||(o.push(r),i.cookie("product_viewed",o.join(","),{expires:7}))}(a,i,e),function(t,e,i){function r(t){t.preventDefault();var e=i(this).data("productUi");i.post("/ajax/favorite/add",{productUi:e},function(t){t.data.success&&o.addClass(a)})}var o=i(".js-favorites-add"),a="icon-favorit--on";o.click(r)}(a,i,e)});