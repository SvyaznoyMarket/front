define(["require","jquery","underscore","mustache","module/util","jquery.enterslide","jquery.photoswipe","module/product.card.tab","module/product.card.fullimg","module/product.card.kit"],function(e,t,r,a,n){var d=t("body"),i=[];t(".js-productSlider").each(function(e,r){var a=t(r).data("url");a&&i.push(a)}),i=r.uniq(i),r.each(i,function(e){t.get(e).done(function(e){r.each(e.result.widgets,function(e,a){if(!r.isObject(e)||!a)return void console.warn("slider",a,e);var n=t(a);if(e.count<=0&&n)return void n.remove();console.info("slider",e,n),n.trigger("render",e),d.trigger("render");var i=n.parents(".js-container");i.length&&(i.show(),t(i.data("tabSelector")).animate({width:"show"}))}),t(".js-productSliderList").enterslide()})}),$creditPayment=t(".js-creditPayment"),console.info("creditPayment",$creditPayment);var c=$creditPayment.data("value");r.isObject(c)&&e(["module/direct-credit","direct-credit"],function(e){c.product.quantity=1,e.getPayment({partnerId:c.partnerId},d.data("user"),c.product,function(e){var r=t($creditPayment.data("templateSelector")),d=t($creditPayment.data("priceSelector")),i=Math.ceil(e.payment);d.html(a.render(r.html(),{shownPrice:n.formatCurrency(i)})),$creditPayment.show()})}),t(".js-productKit-reset").on("click",function(e){var r=t(e.target),a=r.data("value"),n=t(r.data("spinnerSelector"));n.each(function(e,r){var n=t(r),d=t(n.data("buttonSelector")).data("value"),i=n.data("value"),c=a.product[i.product.id];return c&&d&&d.product&&d.product[c.id]?(d.product[c.id].quantity=c.quantity,void n.val(c.quantity)):!0})}),t(".js-productReviewList-more").on("click",function(e){e.preventDefault();try{var a=t(this),n=t(a.data("containerSelector")),d=n.data("url"),i=n.data("value");d&&!0!==a.data("disabled")&&(t.get(d,i).done(function(e){r.isObject(e.result)&&i&&n.length&&(i.page=e.result.page,i.count=e.result.count,i.count<=i.page*i.limit?a.hide():a.show(),r.each(e.result.reviews,function(e){console.warn(e),n.append(e)}))}).always(function(){a.data("disabled",!1)}),a.data("disabled",!0))}catch(c){console.error(c)}})});