define(["require","jquery","underscore","mustache","module/util","jquery.enterslide","jquery.photoswipe","module/product.card.tab","module/product.card.fullimg","module/product.card.kit"],function(t,e,r,a,d){var i=e("body"),n=[];e(".js-productSlider").each(function(t,r){var a=e(r).data("url");a&&n.push(a)}),n=r.uniq(n),r.each(n,function(t){e.get(t).done(function(t){r.each(t.result.widgets,function(t,a){if(!r.isObject(t)||!a)return void console.warn("slider",a,t);var d=e(a);if(t.count<=0&&d)return void d.remove();console.info("slider",t,d),d.trigger("render",t),i.trigger("render");var n=d.parents(".js-container");n.length&&(n.show(),e(n.data("tabSelector")).animate({width:"show"}));var c=d.find(".js-productSlider"),o=d.find(".js-productSliderList");o.enterslide({scrollGa:c.data("ga")})})})}),$creditPayment=e(".js-creditPayment"),console.info("creditPayment",$creditPayment);var c=$creditPayment.data("value");r.isObject(c)&&t(["module/direct-credit","direct-credit"],function(t){c.product.quantity=1,t.getPayment({partnerId:c.partnerId},i.data("user"),c.product,function(t){var r=e($creditPayment.data("templateSelector")),i=e($creditPayment.data("priceSelector")),n=Math.ceil(t.payment);i.html(a.render(r.html(),{shownPrice:d.formatCurrency(n)})),$creditPayment.show()})}),e(".js-productKit-reset").on("click",function(t){var r=e(t.target),a=r.data("value"),d=e(r.data("spinnerSelector"));d.each(function(t,r){var d=e(r),i=e(d.data("buttonSelector")).data("value"),n=d.data("value"),c=a.product[n.product.id];return c&&i&&i.product&&i.product[c.id]?(i.product[c.id].quantity=c.quantity,void d.val(c.quantity)):!0})}),e(".js-productReviewList-more").on("click",function(t){t.preventDefault();try{var a=e(this),d=e(a.data("containerSelector")),i=d.data("url"),n=d.data("value");i&&!0!==a.data("disabled")&&(e.get(i,n).done(function(t){r.isObject(t.result)&&n&&d.length&&(n.page=t.result.page,n.count=t.result.count,n.limit=t.result.limit,n.page*n.limit>n.count||!t.result.count?a.hide():a.show(),d.append(t.result.reviewBlock))}).always(function(){a.data("disabled",!1)}),a.data("disabled",!0))}catch(c){console.error(c)}})});