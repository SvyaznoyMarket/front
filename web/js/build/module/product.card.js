define(["require","jquery","underscore","mustache","module/util","module/config","jquery.photoswipe","module/product.view","module/product.card.kit","jquery.slick","module/product.card.tab"],function(t,e,o,i,r,a){function n(t){e("html, body").animate({scrollTop:t.offset().top-100},500),t.click()}var s=e("body"),c=[];e(".js-productSlider").each(function(t,o){var i=e(o).data("url");i&&c.push(i)}),c=o.uniq(c),o.each(c,function(t){e.get(t).done(function(t){o.each(t.result.widgets,function(t,i){if(!o.isObject(t)||!i)return void console.warn("slider",i,t);var r=e(i);if(t.count<=0&&r)return void r.remove();console.info("slider",t,r),r.trigger("render",t),s.trigger("render");var a=r.parents(".js-container");a.length&&(a.show(),e(a.data("tabSelector")).animate({width:"show"}))}),e(".js-productSliderList").each(function(){var t=e(this).parents(".js-productSlider").data("ga");e(this).slick({infinite:!1,slidesToShow:6,slidesToScroll:6,arrows:!1,responsive:[{breakpoint:800,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:700,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:600,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:500,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:340,settings:{slidesToShow:2,slidesToScroll:2}}]}),e(this).find(".sliderControls_btn").data("gaClick",t)})})}),e(".js-detailSlider").slick({infinite:!1,dots:!0,arrows:!1,nextArrow:'<span class="sliderControls_btn sliderControls_btn__right js-ga-click"></span>',prevArrow:'<span class="sliderControls_btn sliderControls_btn__left js-ga-click"></span>',customPaging:function(t,e){return'<span class="slider_pag_i"></span>'},appendDots:".slider_pag"});var d=e(".js-creditPayment");console.info("creditPayment",d);var l=d.data("value");o.isObject(l)&&t(["module/direct-credit","direct-credit"],function(t){l.product.quantity=1,t.getPayment(l.partnerId,l.sessionId,l.product,function(t){var o=e(d.data("templateSelector")),a=e(d.data("priceSelector")),n=Math.ceil(t.payment);a.html(i.render(o.html(),{shownPrice:r.formatCurrency(n)})),d.show()})}),e(".js-productKit-reset").on("click",function(t){var o=e(t.target),i=o.data("value"),r=e(o.data("spinnerSelector"));r.each(function(t,o){var r=e(o),a=e(r.data("buttonSelector")).data("value"),n=r.data("value"),s=i.product[n.product.id];return s&&a&&a.product&&a.product[s.id]?(a.product[s.id].quantity=s.quantity,void r.val(s.quantity)):!0})}),e(".js-productReviewList-more").on("click",function(t){t.preventDefault();try{var i=e(this),r=e(i.data("containerSelector")),a=r.data("url"),n=r.data("value");a&&!0!==i.data("disabled")&&(e.get(a,n).done(function(t){o.isObject(t.result)&&n&&r.length&&(n.page=t.result.page,n.count=t.result.count,n.limit=t.result.limit,n.page*n.limit>n.count||!t.result.count?i.hide():i.show(),r.append(t.result.reviewBlock))}).always(function(){i.data("disabled",!1)}),i.data("disabled",!0))}catch(s){console.error(s)}}),function(t,e,o){var i=parseInt(t.productId,10),r=o.cookie("product_viewed")?o.cookie("product_viewed").split(","):[],a=e.find(r,function(t){return t===i});a||(r.push(i),o.cookie("product_viewed",r.join(","),{expires:7}))}(a,o,e),function(t,e,o){function i(t){t.preventDefault();var e=o(this).data("productUi");o.post("/favorite/add",{productUi:e},function(t){t.data.success&&r.addClass(a)})}var r=o(".js-favorites-add"),a="icon-favorit--on";r.click(i)}(a,o,e),function u(t,e,o){function u(t){t.preventDefault(),n(r)}var i=o(".js-review-scroll-trigger"),r=o('.js-change-tab[data-block="js-reviews-block"]');i.click(u)}(a,o,e),function(t,e,o){function i(t){t.preventDefault(),n(a)}var r=o(".js-specs-scroll-trigger"),a=o('.js-change-tab[data-block="js-description-block"]');r.click(i)}(a,o,e)});