define(["jquery","underscore","mustache","module/user.profile"],function(e,n,o){var t=e("body"),a=e("#tpl-modalWindow"),i=function(){var n=document.location.pathname,o=document.location.hash;console.info("hideMenu"),"/private"==n&&("#active"==o?(console.info("hideMenu","OK"),e(".js-content").removeClass("private-index")):(console.info("hideMenu","NO"),e(".js-content").addClass("private-index")))};i(),window.addEventListener("popstate",function(e){i()},!1),t.on("click",".js-menuHide",function(e){i()}),t.on("click",".js-user-subscribe-input",function(){var n=e(this),o=n.data("value"),t=!!n.is(":checked"),a=t?n.data("setUrl"):n.data("deleteUrl");try{if(!a)throw{message:"Нет url"};e.post(a,o).done(function(e){!e.success})}catch(e){console.error(e)}}),t.on("click",".js-user-address-delete",function(n){var i,d,s=e(this),l=e("#tpl-deleteForm"),c=s.data("modal-position"),r=s.data("value")||{};console.info(a.html()),n.stopPropagation(),d=o.render(l.html(),r),i=e(o.render(a.html(),{title:"Удалить адрес?",content:d})).appendTo(t),i.addClass(c),i.lightbox_me({onLoad:function(){i.find(".js-modal-content").append(d)},beforeClose:function(){}}),n.preventDefault()}),t.on("click",".js-user-favorite-delete",function(n){var i,d,s=e(this),l=e("#tpl-deleteForm"),c=s.data("modal-position"),r=s.data("value")||{};console.info(a.html()),n.stopPropagation(),d=o.render(l.html(),r),i=e(o.render(a.html(),{title:"Удалить товар?",content:d})).appendTo(t),i.addClass(c),i.lightbox_me({onLoad:function(){i.find(".js-modal-content").append(d)},beforeClose:function(){}}),n.preventDefault()})});