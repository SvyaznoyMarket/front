define(["jquery","underscore","mustache","module/user.profile"],function(e,t,o){var n=e("body"),a=e("#tpl-modalWindow"),i=document.location.pathname,d=document.location.hash;n.on("click",".js-menuHide",function(t){d=document.location.hash,"/private"==i&&(t.preventDefault(),e(".js-content").removeClass("private-index"))}),e(document).ready(function(){"#active"==d&&"/private"==i&&e(".js-menuHide").trigger("click")}),n.on("click",".js-user-subscribe-input",function(){var t=e(this),o=t.data("value"),n=!!t.is(":checked"),a=n?t.data("setUrl"):t.data("deleteUrl");try{if(!a)throw{message:"Нет url"};e.post(a,o).done(function(e){!e.success})}catch(i){console.error(i)}}),n.on("click",".js-user-address-delete",function(t){var i,d,l=e(this),r=e("#tpl-deleteForm"),c=l.data("modal-position"),s=l.data("value")||{};console.info(a.html()),t.stopPropagation(),d=o.render(r.html(),s),i=e(o.render(a.html(),{title:"Удалить адрес?",content:d})).appendTo(n),i.addClass(c),i.lightbox_me({onLoad:function(){i.find(".js-modal-content").append(d)},beforeClose:function(){}}),t.preventDefault()}),n.on("click",".js-user-favorite-delete",function(t){var i,d,l=e(this),r=e("#tpl-deleteForm"),c=l.data("modal-position"),s=l.data("value")||{};console.info(a.html()),t.stopPropagation(),d=o.render(r.html(),s),i=e(o.render(a.html(),{title:"Удалить товар?",content:d})).appendTo(n),i.addClass(c),i.lightbox_me({onLoad:function(){i.find(".js-modal-content").append(d)},beforeClose:function(){}}),t.preventDefault()})});