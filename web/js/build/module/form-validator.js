define(["require","jquery","underscore","mustache"],function(e,r,n){var a=function(){r("body").on("blur",".js-validator-form-field",function(){var e=r(this);d(e)})},i=function(e,r){n.each(r,function(r){t(e.find('[data-field="'+r.field+'"]'),r)})},o=function(e){var n=!0;return console.info("form",e),e.find("[required]").each(function(e,a){var i=r(a),o="";i.val().length||(n=!1,("undefined"==typeof nomsg||nomsg===!1)&&(o=i.data("requiredMessage")||"Поле пустое"),t(i,{name:o}))}),{isValid:n}},t=function(e,r){var n=e.parent().addClass("error");n.parent().find("label.error").length||n.parent().append('<label class="error">'+r.name+"</label>")},d=function(e){e.parent().removeClass("error").parent().find("label.error").remove()};return{init:a,validate:i,validateRequired:o,showFieldError:t,resetFieldError:d}});