define(["require","jquery","underscore","mustache"],function(e,r,n){var a=function(){r("body").on("blur",".js-validator-form-field",function(){var e=r(this);l(e)})},o=function(e,r){n.each(r,function(r){t(e.find('[data-field="'+r.field+'"]'),r)})},i=function(e){var n=!0;return console.info("form",e),e.find("[required]").each(function(e,a){var o=r(a),i="";o.val().length||(n=!1,nomsg=o.attr("no-msg"),("undefined"==typeof nomsg||nomsg===!1)&&(i="Поле пустое"),t(o,{name:i}))}),{isValid:n}},t=function(e,r){var n=e.parent().addClass("error");n.parent().find("label.error").length||n.parent().append('<label class="error">'+r.name+"</label>")},l=function(e){e.parent().removeClass("error").parent().find("label.error").remove()};return{init:a,validate:o,validateRequired:i,showFieldError:t,resetFieldError:l}});