define(["require","jquery","underscore","mustache"],function(e,r,n,a){var i=function(){r("body").on("blur",".js-validator-form-field",function(e){var n=r(this);l(n)})},o=function(e,r){n.each(r,function(r,n){d(e.find('[data-field="'+r.field+'"]'),r)})},t=function(e){var n=!0;return console.info("form",e),e.find("[required]").each(function(e,a){var i=r(a),o="";i.val().length||(n=!1,"undefined"!=typeof nomsg&&nomsg!==!1||(o=i.data("requiredMessage")||"Поле пустое"),d(i,{name:o}))}),{isValid:n}},d=function(e,r){var n=e.parent().addClass("error");n.parent().find("label.error").length||n.parent().append('<label class="error">'+r.name+"</label>")},l=function(e){e.parent().removeClass("error").parent().find("label.error").remove()};return{init:i,validate:o,validateRequired:t,showFieldError:d,resetFieldError:l}});