define(["require","jquery","underscore","mustache","module/util","jquery.maskedinput","module/order/user.form","module/order/common","module/order/toggle","jquery.modal"],function(e,o,t,a){var r=o("body"),n=o(".js-order-delivery-form"),d=function(e){e.stopPropagation();var t=o(this);o.ajax({url:n.attr("action"),data:t.data("value"),type:"post",timeout:3e4}).done(function(e){o(n.data("containerSelector")).html(e)}).always(function(){console.info("unblock screen")}),e.preventDefault()},l=function(t){t.stopPropagation(),o(this).modal();var r=o(this),n=o(".js-modal-content"),d=o("#tpl-order-delivery-point-popup"),l=o.parseJSON(o(r.data("dataSelector")).html());n.append(a.render(d.html(),l)),t.preventDefault(),e(["yandexmaps"],function(){})},i=function(e){e.stopPropagation(),o(this).modal();var t=o(this),r=o(".js-modal-content"),n=o("#tpl-order-delivery-calendar"),d=o.parseJSON(o(t.data("dataSelector")).html());r.append(a.render(n.html(),d))},c=function(t){t.stopPropagation();var a=o(t.currentTarget),r=a.data("containerId"),n=a.data("map"),d=a.data("mapData");e(["yandexmaps"],function(e){n||e.ready(function(){console.info(r),n=new e.Map(r,{center:[d.center.lat,d.center.lng],zoom:d.zoom},{autoFitToViewport:"always"}),a.data("map",n)})})};r.on("click",".js-order-delivery-form-control",d),r.on("click",".js-order-delivery-pointPopup-link",l),r.on("click",".js-order-delivery-map-link",c),r.on("click",".js-order-delivery-celendar-link",i)});