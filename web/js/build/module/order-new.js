define(["require","jquery","underscore","mustache","module/util","module/form-validator","jquery.maskedinput"],function(e,o,r,s,t,l){function a(e,o){console.log("success form"),console.log(o),l.validate(e,o.errors),null!=o.redirect&&o.redirect.length&&(window.location.href=o.redirect)}function i(){console.log("error form")}o.mask.definitions.x="[0-9]",o(".js-field-phone").mask("+7(xxx)xxx-xx-xx",{placeholder:"+7(xxx)xxx-xx-xx"}),o(".js-field-mnogoru").mask("xxxx xxxx",{placeholder:"xxxx xxxx"});var n=o("body"),x=(o(".js-user-field"),o(".js-global-error"),function(e){var r,s=o(".js-toggle-wrap"),t="toggle--active",l=o(e.target);r=l.closest(".js-toggle-wrap").hasClass(t),r?o(this).closest(".js-toggle-wrap").removeClass(t):(s.removeClass(t),o(this).closest(".js-toggle-wrap").addClass(t))}),c=function(e){var r=o(".js-toggle-wrap"),s="toggle--active";r.is(e.target)||0!==r.has(e.target).length||r.removeClass(s)};o(".js-user-form").on("submit",function(e){e.preventDefault();var r=o(".js-user-form"),s=r.attr("action");o.ajax({type:"POST",url:s,data:r.serialize(),error:function(e){i(r,e)},success:function(e){a(r,e)}})}),n.on("click",".js-toggle-link",x),n.on("click",c),l.init()});