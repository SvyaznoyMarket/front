define(["require","jquery","underscore","mustache","module/util","module/form-validator","module/order/analytics.google","jquery.maskedinput","module/toggleLink"],function(e,o,n,r,i,t,u){var a=o(".js-user-form"),s=o(".js-order-content"),l="m-loader";a.on("submit",function(e){e.preventDefault();var r=o(".js-user-form"),i=r.attr("action");o.ajax({type:"POST",url:i,data:r.serialize()}).done(function(e){t.validate(r,e.errors),null!=e.redirect&&e.redirect.length&&(u.push(["6_1 Далее_успешно_Получатель_ОБЯЗАТЕЛЬНО"]),window.location.href=e.redirect,s.addClass(l),setTimeout(function(){s.removeClass(l)},3e4));try{e.errors&&e.errors.length&&u.push(["6_2 Далее_ошибка_Получатель","Поле ошибки: "+n.map(e.errors,function(e){return e.field})])}catch(o){console.error(o)}}).always(function(){console.info("unblock screen")}).error(function(){u.push(["6_2 Далее_ошибка_Получатель"])})}),o.mask.definitions.x="[0-9]",o.mask.autoclear=!1,a.find('[data-field="phone"]').mask("+7(xxx)xxx-xx-xx",{placeholder:"+7(___)___-__-__"}).on("focus",function(){u.push(["1 Телефон_Получатель_ОБЯЗАТЕЛЬНО"])}),a.find('[data-field="email"]').on("focus",function(){u.push(["2 Email_Получатель"])}),a.find('[data-field="firstName"]').on("focus",function(){u.push(["3 Имя_Получатель_ОБЯЗАТЕЛЬНО"])}),a.find('[data-field="mnogoru"]').mask("xxxx xxxx",{placeholder:"xxxx xxxx"}).on("focus",function(){u.push(["4 Начислить_баллы_Получатель"])}),o(".js-auth-link").on("click",function(){u.push(["5 Войти_с_паролем_Получатель"])}),t.init(),u.push(["1 Вход_Получатель_ОБЯЗАТЕЛЬНО"])});