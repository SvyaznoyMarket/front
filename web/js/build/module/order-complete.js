define(["require","jquery","underscore","mustache","module/util","module/config","module/form-validator","module/order/analytics.google","jquery.ui","jquery.maskedinput"],function(o,e,n,t,a,l,r,i){var c=e("body"),d=e("#tpl-order-complete-onlinePayment-popup"),s=e("#tpl-modalWindow"),u=function(o){var n=e(this),a=e(s.html()).appendTo(c),l=n.data("modal-title"),r=n.data("modal-position"),i=e.parseJSON(e(n.data("storageSelector")).html());console.info(i),o.stopPropagation(),a.find(".js-modal-title").text(l),a.addClass(r),a.lightbox_me({fullScreen:!0,modal:!1,onLoad:function(){a.find(".js-modal-content").append(t.render(d.html(),i))},beforeClose:function(){}})},m=function(o){var n=e(this),t=e(n.data("containerSelector")),a=t.data("url"),l=n.data("value");o.stopPropagation(),e.ajax({url:a,data:l,type:"post",timeout:4e4}).done(function(o){t.html(o.form)}).always(function(){console.info("unblock screen")}).error(function(o){var n,t;o&&302===o.status&&(n=e.parseJSON(o.responseText)||{},t=n.redirect||"/cart",window.location.href=t)})};c.on("click",".js-order-complete-onlinePayment-link",u),c.on("click",".js-order-complete-onlinePayment-radio",m),e(".js-moreLink").on("click",function(o){var n=e(this);n.siblings().show(),n.hide(),o.preventDefault()});try{i.push(["16 Вход_Оплата_ОБЯЗАТЕЛЬНО"]),c.on("click",".js-order-complete-onlinePayment-link",function(){i.push(["17 Оплатить_онлайн_вход_Оплата"])}),c.on("click",".js-order-complete-onlinePayment-radio",function(){var o=e(this);"5"===o.val()?i.push(["17_1 Оплатить_онлайн_Оплата","Онлайн-оплата"]):"8"===o.val()&&i.push(["17_1 Оплатить_онлайн_Оплата","Psb"])})}catch(p){console.error(p)}});