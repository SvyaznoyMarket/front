define(["require","jquery","underscore","mustache","module/util","module/config","jquery.ui","jquery.maskedinput","module/order/user.form","module/order/common","module/order/toggle"],function(o,e,t,n){var r=e("#tpl-order-delivery-onlinePayment-popup"),a=e("#tpl-modalWindow"),d=function(o){var t=e(this),d=e(a.html()).appendTo($body),i=t.data("modal-title"),l=t.data("modal-position"),u=Storage.get(t.data("storageSelector"));o.stopPropagation(),d.find(".js-modal-title").text(i),d.addClass(l),d.lightbox_me({onLoad:function(){d.find(".js-modal-content").append(n.render(r.html(),u))},beforeClose:function(){}})},i=function(o){var t=e(this),n=e(t.data("containerSelector")),r=n.data("url");o.stopPropagation(),console.info(t,n),e.ajax({url:r,data:data,type:"post",timeout:4e4}).done(function(o){n.html(o.form)}).always(function(){console.info("unblock screen")}).error(function(o){var t,n;o&&302===o.status&&(t=e.parseJSON(o.responseText)||{},n=t.redirect||"/cart",window.location.href=n)})};$body.on("click",".js-order-delivery-onlinePayment-link",d),$body.on("click",".js-order-delivery-onlinePayment-radio",i)});