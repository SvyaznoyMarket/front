define(["jquery","underscore","mustache"],function(o,e,t){o.fn.modal=function(){return console.log("modal"),this.each(function(){function e(){d.css({overflow:"hidden"}),$template=o("#tpl-modalWindow"),r={position:m,title:i},s.append(t.render($template.html(),r));{var e=(o(".js-modal"),o(".js-modal-overlay"));o(".js-modal-content")}e.show()}function a(){var e=o(".js-modal"),t=o(".js-modal-overlay");e.remove(),t.remove(),d.css({overflow:"auto"})}var l=o.extend({},o.fn.enterPopup.defaults,l),n=o(this),d=o("html"),s=o("body"),m=n.data("modal-position"),i=n.data("modal-title"),r={};e(),s.on("click",".js-modal-close",a)})},o.fn.modal.defaults={}});