define(["jquery","underscore","mustache"],function(o,e,l){o.fn.modal=function(){return console.log("modal"),this.each(function(){var e=o.extend({},o.fn.enterPopup.defaults,e),t=o(this),a=o("html"),n=o("body"),d=t.data("modal-position"),s=t.data("modal-title"),i={},m=function(){a.css({overflow:"hidden"}),$template=o("#tpl-modalWindow"),i={position:d,title:s},n.append(l.render($template.html(),i));var e=o(".js-modal-overlay");e.show()},r=function(){var e=o(".js-modal"),l=o(".js-modal-overlay");e.remove(),l.remove(),a.css({overflow:"auto"}),console.log(e)};m(),n.on("click",".js-modal-close",r)})},o.fn.modal.defaults={}});